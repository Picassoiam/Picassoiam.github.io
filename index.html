<!DOCTYPE html>
<html>
<head>
	<title>COVID-19 Zambia Daily Statistics</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">   
	<script type="text/javascript"></script> 
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
</head>
<body>
	<p>
		<h2>COVID-19 Zambia Daily Statistics</h2>
	</p>
 <div id="container" style="width:75%;height: 50vh">
 	<canvas id="myChart"></canvas>
 </div>


	<script>
		const xlabels = [];
		const ycases = [];
		const ycases2 =[];
		const ycases3 =[];


		chartIt(); 
		
async function chartIt(){
	await getData();

const ctx = document.getElementById('myChart').getContext('2d');
const myChart = new Chart(ctx, {
	options:{
		responsive:true,
		maintainAspectRatio:false,
	},
    type: 'line', 
    data: {
        labels: xlabels,
        datasets: [{
            label: '# of COVID-19 CASES', 
            data: ycases,
            fill:false,
            backgroundColor: ['rgba(255, 99, 132, 0.2)',],
            borderColor: ['rgba(255, 99, 132, 1)',],
            borderWidth: 3
        },
        {
     		label: "# of COVID-19 RECOVERED",
     		data: ycases2,
      		fill: false,
      		backgroundColor: ['rgba(255, 99, 132, 0.2)',],	
            borderColor: ['rgba(33, 163, 35, 1)',],
            borderWidth: 3
        },
        {
     		label: "# of COVID-19 DEATHS",
     		data: ycases3,
      		fill: false,
      		backgroundColor: ['rgba(255, 99, 132, 0.2)',],
            borderColor: ['rgba(0, 0, 0, 1)',],
            borderWidth: 3
        }
      ]},
});
	}
		async function getData(){
			const response = await fetch('https://raw.githubusercontent.com/Picassoiam/data_to_viz/master/COVID19%20Stats%20Zambia.csv');
			const data = await response.text();

			const table = data.split('\n').slice(1);
			table.forEach(row => {
			const columns = row.split(',');

			const date = columns[0];
			xlabels.push(date)
			const cases = columns[1];
			ycases.push(cases);
			const rec = columns[2];
			ycases2.push(rec);
			const dead = columns[3];
			ycases3.push(dead);
			console.log(date,cases,dead);		
			});
		}
	</script>
	</script>
	<p>source:<a href="https://github.com/CSSEGISandData">Center for Systems Science and Engineering (CSSE) at Johns Hopkins University</a>
	</p>
</body>
</html> 